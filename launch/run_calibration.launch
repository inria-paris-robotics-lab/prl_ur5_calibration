<?xml version="1.0"?>
<launch>
    <arg name="recover" default="False" doc="Recover measures from a previous run if possible"/>
    <arg name="compute_only" default="False" doc="Only read from the existing measure file and do the computation"/>
    <arg name="config_file" default="files/configuration.yaml" doc=""/>

    <!-- Upload urdf/srdf for hpp -->
    <include file="$(find prl_pinocchio)/launch/upload_ur5.launch"/>

    <!-- hand2eye calibration service -->
    <node name="visp_hand2eye_calibration_calibrator" pkg="visp_hand2eye_calibration" type="visp_hand2eye_calibration_calibrator"/>

    <!-- VISP tracker-->
    <node name="visp_auto_tracker" pkg="visp_auto_tracker" type="visp_auto_tracker">
        <remap from="/visp_auto_tracker/image_raw" to="/left_camera/color/image_raw"/>
        <remap from="/visp_auto_tracker/camera_info" to="/left_camera/color/camera_info"/>
        <param name="model_path" value="$(find prl_ur5_calibration)/files/models"/>
        <param name="model_name" value="april_pattern"/>
        <param name="debug_display" value="true"/>
    </node>

    <!-- Run calibration node -->
    <node pkg="prl_ur5_calibration" type="run_calibration.py" name="$(anon run_calibration.py)" output="screen">
        <param name="config_file" value="$(arg config_file)"/>
        <param name="recover" value="$(arg recover)"/>
        <param name="compute_only" value="$(arg compute_only)"/>
    </node>
</launch>
